\section{Transfer functions in feedback}

For \glspl{controller} to \glslink{regulator}{regulate} a \gls{system} or
\glslink{tracking}{track} a reference, they must be placed in positive or
negative feedback with the \gls{plant} (whether to use positive or negative
depends on the \gls{plant} in question). Stable feedback loops attempt to make
the \gls{output} equal the \gls{reference}.

\begin{bookfigure}
  \begin{tikzpicture}[auto, >=latex']
    % Place the blocks
    \node [name=input] {$X(s)$};
    \node [sum, right=of input] (sum) {};
    \node [block, right=of sum] (K) {$K$};
    \node [block, right=of K] (G) {$G$};
    \node [right=of G] (output) {$Y(s)$};
    \node [block, below=of $(K)!0.5!(G)$] (H) {$H$};

    % Connect the nodes
    \draw [arrow] (input) -- node[pos=0.85] {$+$} (sum);
    \draw [arrow] (sum) -- node {} (K);
    \draw [arrow] (K) -- node {} (G);
    \draw [arrow] (G) -- node[name=y] {} (output);
    \draw [arrow] (y) |- (H);
    \draw [arrow] (H) -| node[pos=0.97, right] {$-$} (sum);
  \end{tikzpicture}

  \caption{Feedback controller block diagram}
  \label{fig:feedback_controller_block_diagram}

  \begin{figurekey}
    \begin{tabulary}{\linewidth}{LLLL}
      $X(s)$ & input & $H$ & measurement transfer function \\
      $K$ & controller gain & $Y(s)$ & output \\
      $G$ & plant transfer function & & \\
    \end{tabulary}
  \end{figurekey}
\end{bookfigure}

The transfer function of figure \ref{fig:feedback_controller_block_diagram}, a
\gls{control system} diagram with feedback, from input to output is

\begin{equation}
  G_{cl}(s) = \frac{Y(s)}{X(s)} = \frac{KG}{1 + KGH}
\end{equation}

The numerator is the \gls{open-loop gain} and the denominator is one plus the
gain around the feedback loop, which may include parts of the
\gls{open-loop gain} (see appendix \ref{sec:deriv_tf_feedback} for a
derivation). As another example, the transfer function from the input to the
\gls{error} is

\begin{equation}
  G_{cl}(s) = \frac{E(s)}{X(s)} = \frac{1}{1 + KGH}
\end{equation}

The roots of the denominator of $G_{cl}(s)$ are different from those of the
open-loop transfer function $KG(s)$. These are called the closed-loop poles.
